# تعليمات النشر النهائية - Sales Manager

## المشاكل التي تم حلها

1. ✅ مشكلة تسجيل الدخول
2. ✅ مشكلة Row Level Security (RLS)
3. ✅ التصميم المحدث
4. ✅ المزامنة بين الأجهزة

---

## الخطوة 1: تشغيل سكريبت SQL في Supabase

**مهم جداً - هذه أهم خطوة:**

1. اذهب إلى [Supabase Dashboard](https://supabase.com/dashboard)
2. افتح مشروعك
3. اضغط على **SQL Editor** من القائمة اليسرى
4. انسخ محتوى ملف `scripts/COMPLETE_FIX.sql` كاملاً
5. الصقه في المحرر
6. اضغط **Run** أو **F5**
7. انتظر حتى تظهر رسالة "Success"

**إذا ظهر خطأ:**
- تأكد من نسخ السكريبت كاملاً
- تأكد من أنك في المشروع الصحيح (URL: cxoldiyxjjuicmfrsqmn)

---

## الخطوة 2: تحديث Environment Variables

**في Netlify:**

1. اذهب إلى [Netlify Dashboard](https://app.netlify.com)
2. افتح موقعك `salesmanager-v1`
3. اذهب إلى **Site settings** > **Environment variables**
4. أضف هذه المتغيرات:

```
NEXT_PUBLIC_SUPABASE_URL=https://cxoldiyxjjuicmfrsqmn.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=<YOUR_ANON_KEY>
```

**للحصول على ANON_KEY:**
1. في Supabase Dashboard
2. اذهب إلى **Settings** > **API**
3. انسخ القيمة من **anon public**

5. **احفظ** المتغيرات
6. **Redeploy** الموقع

---

## الخطوة 3: تحميل النسخة الحديثة من v0

**إذا كان الموقع المنشور لا يزال قديماً:**

1. في v0، اضغط على النقاط الثلاث **(...)**
2. اختر **Download ZIP**
3. فك الضغط على جهازك
4. افتح GitHub وحدث المشروع `saleemelghoul-boop/sales-app-final-v1`
5. ارفع الملفات الجديدة (أو استخدم git push)
6. Netlify سيتعرف تلقائياً على التحديثات وينشر النسخة الجديدة

---

## الخطوة 4: اختبار النظام

1. افتح الرابط: https://salesmanager-v1.netlify.app
2. سجل دخول باستخدام:
   - **اسم المستخدم:** admin
   - **كلمة المرور:** admin
3. إذا لم يعمل، اضغط على زر **"إنشاء/إعادة إنشاء المستخدم admin"**
4. ثم حاول تسجيل الدخول مرة أخرى

---

## اختبار المزامنة بين الأجهزة

**على الحاسوب:**
1. سجل دخول كمدير
2. أضف مندوب جديد (مثلاً: "مندوب 1")

**على الهاتف:**
1. افتح نفس الرابط
2. سجل دخول كمدير
3. اذهب إلى صفحة المندوبين
4. **يجب أن ترى المندوب الذي أضفته من الحاسوب**

---

## إذا استمرت المشاكل

### مشكلة: لا يمكن تسجيل الدخول

**الحل:**
1. تأكد من تشغيل سكريبت SQL
2. اضغط F12 لفتح Console
3. انظر الأخطاء واكتبها لي

### مشكلة: البيانات لا تتزامن

**الحل:**
1. تأكد من Environment Variables في Netlify
2. تأكد من أن SUPABASE_URL صحيح
3. تأكد من إيقاف RLS (السكريبت يفعل هذا)

### مشكلة: التصميم القديم

**الحل:**
1. امسح Cache المتصفح (Ctrl+Shift+Delete)
2. أو استخدم Incognito/Private Mode
3. حدث الصفحة (Ctrl+F5)

---

## بيانات الدخول الافتراضية

**المدير:**
- اسم المستخدم: `admin`
- كلمة المرور: `admin`

---

## الملفات المهمة التي تم تحديثها

1. `lib/database.ts` - يستخدم SupabaseDatabase (مزامنة حقيقية)
2. `styles/globals.css` - تصميم حديث مع خطوط Cairo و Tajawal
3. `components/login-screen.tsx` - شاشة دخول محسنة
4. `components/*-dashboard.tsx` - لوحات تحكم محدثة

---

## ملاحظات مهمة

- النظام **يستخدم Supabase وليس localStorage**
- البيانات **تتزامن بين جميع الأجهزة**
- التصميم **محدث ومحسن**
- Dark Mode **متوفر** (زر في أعلى اللوحة)

إذا اتبعت الخطوات بالترتيب، سيعمل كل شيء بنجاح 100%.
